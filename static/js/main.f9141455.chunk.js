(this["webpackJsonpoe-tree-chart"]=this["webpackJsonpoe-tree-chart"]||[]).push([[0],{109:function(e,t,a){e.exports=a(282)},114:function(e,t,a){},131:function(e,t,a){},282:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),c=a(27),o=a.n(c),l=(a(114),a(30)),i=a(100),s=a(101),u=a(38),d=a(108),h=a(107),m=a(102),p=a.n(m).a.create({baseURL:"https://api.offset.earth/trees",headers:{Accept:"application/json"}}),D=(a(131),a(103)),f=function(e){var t=e.chartData,a=e.chartOptions;return r.a.createElement("div",{className:"chart"},r.a.createElement(D.a,{data:t,options:a}))},b=a(37),g=a(65),v=a(62),E=a.n(v),O=(a(225),function(e){var t=e.initStartDate,a=e.initEndDate,c=e.onApply,o=Object(n.useState)(new Date(t)),l=Object(g.a)(o,2),i=l[0],s=l[1],u=Object(n.useState)(new Date(a)),d=Object(g.a)(u,2),h=d[0],m=d[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Date Range Filter"),r.a.createElement(E.a,{selected:i,onChange:function(e){return s(e)},selectsStart:!0,startDate:i,endDate:h}),r.a.createElement(E.a,{selected:h,onChange:function(e){return m(e)},selectsEnd:!0,startDate:i,endDate:h,minDate:i}),r.a.createElement("button",{onClick:function(){return c(i,h)}},"Apply"))}),j=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={loaded:!1,treeData:{},chartData:[],startDate:"",endDate:""},n.handleFilter=n.handleFilter.bind(Object(u.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getChartData()}},{key:"getChartData",value:function(){var e=this;p.get("").then((function(t){var a=function(e){return e.reduce((function(e,t){var a=new Date(t.createdAt),n="".concat(a.getFullYear(),"-").concat(a.getMonth()+1,"-").concat(a.getDate()),r=t.value;return Object(l.a)(Object(l.a)({},e),{},Object(b.a)({},n,e.hasOwnProperty(n)?e[n]+r:r))}),{})}(t.data),n=Object.keys(a).map((function(e){return new Date(e)}));e.setState({loaded:!0,treeData:a,startDate:n[n.length-1],endDate:n[0],chartData:{labels:n,datasets:[{label:"Trees Planted",data:Object.values(a),backgroundColor:"#43C185"}]}})}))}},{key:"handleFilter",value:function(e,t){var a=Object(l.a)({},this.state.treeData),n=Object.keys(a).map((function(e){return new Date(e)})).filter((function(a){return e<=a&&t>=a}));this.setState({chartData:{labels:n,datasets:[{label:"Trees Planted",data:n.map((function(e){var t="".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate());return a[t]})),backgroundColor:"#43C185"}]}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loaded,n=t.chartData,c=t.startDate,o=t.endDate;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Reforestation Efforts")),a?r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{initStartDate:c,initEndDate:o,onApply:function(t,a){return e.handleFilter(t,a)}}),r.a.createElement(f,{chartData:n,chartOptions:{title:{display:!0,text:"Trees planted per day",fontSize:30,fontColor:"#000"},scales:{yAxes:[{type:"time",time:{unit:"day"}}]}}})):r.a.createElement("p",null,"Loading..."))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[109,1,2]]]);
//# sourceMappingURL=main.f9141455.chunk.js.map